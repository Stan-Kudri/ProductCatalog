@using Bromix.MudBlazor.MaterialDesignIcons
@using ProductCatalog.Core.Models.Categories
@using ProductCatalog.Core.Models.Companies
@using ProductCatalog.Core.Models.Types
@using ProductCatalog.MudBlazors
@using ProductCatalog.MudBlazors.Pages
@using ProductCatalog.MudBlazors.Shared

 <MudContainer>
    <MudForm @bind-Errors="@errors" Model="@ProductModel">

        <MudTextField T="string" Label="Name"
                      InputType="InputType.Text"
                      Required="true"
                      @bind-Value=@ProductModel.Name
                      Validation="@(new Func<string, IEnumerable<string>>(ValidFormatText))" />

        <MudTextField T="decimal" Label="Price"
                      InputType="InputType.Text"
                      Required="true"
                      @bind-Value=@ProductModel.Price
                      Validation="@(new Func<string, IEnumerable<string>>(ValidFormatPrice))" />

        <MudSelect T="Company" Label="Company" @bind-Value="ProductModel.Company" AdornmentIcon="@Icons.Material.Filled.ShortText">
            @foreach (var item in selectCompanies)
            {
                <MudSelectItem T="Company" Value="@item" />
            }
        </MudSelect>

        <MudSelect T="Category" Label="Category" AdornmentIcon="@Icons.Material.Filled.ShortText" Value="@ProductModel.Category" ValueChanged="ChangeValueCategory">
            @foreach (var item in selectCategories)
            {
                <MudSelectItem T="Category" Value="@item" />
            }
        </MudSelect>

        <MudSelect T="ProductType" Label="Product Type" @bind-Value="ProductModel.ProductType" AdornmentIcon="@Icons.Material.Filled.ShortText" Disabled="@isDisabledType">
            @foreach (var item in selectTypes)
            {
                <MudSelectItem T="ProductType" Value="@item" />
            }
        </MudSelect>

    </MudForm>

    <MudSpacer/>

    <MudToolBar DisableGutters="true" Class="relative d-flex justify-end gap-1">

        @if (isAddItem)
        {
            <MudTooltip Text="Save" Placement="Placement.Bottom">
                <MudButton Style="max-width: 100px; max-height : 40px;" Size="Size.Medium" Color="Color.Primary" Variant="Variant.Outlined" OnClick="Add">Save</MudButton>
            </MudTooltip>
            <MudTooltip Text="Clear" Placement="Placement.Bottom">
                <MudButton Style="max-width: 100px; max-height : 40px;" Size="Size.Medium" Color="Color.Primary" Variant="Variant.Outlined" OnClick="ClearData">Clear</MudButton>
            </MudTooltip>
        }
        else
        {
            <MudTooltip Text="Save" Placement="Placement.Bottom">
                <MudButton Style="max-width: 100px; max-height : 40px;" Size="Size.Medium" Color="Color.Primary" Variant="Variant.Outlined" OnClick="Updata">Save</MudButton>
            </MudTooltip>
            <MudTooltip Text="Replace" Placement="Placement.Bottom">
                <MudButton Class="ml-1" Style="max-width: 100px; max-height : 40px;" Size="Size.Medium" Color="Color.Primary" Variant="Variant.Outlined" OnClick="RecoverPastData">Recover</MudButton>
            </MudTooltip>
        }

        <MudTooltip Text="Close" Placement="Placement.Bottom">
            <MudButton Style="max-width: 100px; max-height : 40px;" Size="Size.Medium" Color="Color.Primary" Variant="Variant.Outlined" OnClick="Close">Close</MudButton>
        </MudTooltip>

    </MudToolBar>

</MudContainer>
