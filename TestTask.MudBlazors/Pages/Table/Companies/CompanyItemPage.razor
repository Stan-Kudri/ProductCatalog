@page "/addcompany"
@page "/editcompany/{idCompany:int}"

@using TestTask.Core.Models.Companies

<MudCard>
    <MudCardContent>
        <MudText Align="Align.Center" Class="mb-n4">Add Company</MudText>
        <MudSpacer />
        <MudForm @bind-Errors="@errors" Model="@companyModel">
            <MudTextField T="string" Label="Name"
                          InputType="InputType.Text"
                          Required="true"
                          @bind-Value=@companyModel.Name
                          Validation="@(new Func<string, IEnumerable<string>>(ValidFormatText))" />
            <MudTextField T="string" Label="Country"
                          InputType="InputType.Text"
                          Required="true"
                          @bind-Value=@companyModel.Country
                          Validation="@(new Func<string, IEnumerable<string>>(ValidFormatText))" />
            <MudDatePicker Label="Date"
                           MaxDate="DateTime.Now"
                           Required="true"
                           @bind-Date=@companyModel.DateCreation />
        </MudForm>
        <MudCardActions>
            @if (IsAddItem)
            {
                <MudTooltip Text="Save" Placement="Placement.Bottom">
                    <MudIconButton Icon="@Icons.Material.Filled.Save" Variant="Variant.Filled" Color="Color.Tertiary" Size="Size.Medium" OnClick="Add"/>
                </MudTooltip>
                <MudTooltip Text="Clear" Placement="Placement.Bottom" >
                    <MudIconButton Icon="@Icons.Material.Filled.Reply" Variant="Variant.Filled" Color="Color.Warning" Size="Size.Medium" OnClick="ClearData" Class="ml-1" />
                </MudTooltip>
            }
            else
            {
                <MudTooltip Text="Save" Placement="Placement.Bottom">
                    <MudIconButton Icon="@Icons.Material.Filled.Save" Variant="Variant.Filled" Color="Color.Tertiary" Size="Size.Medium" OnClick="Updata" />
                </MudTooltip>
                <MudTooltip Text="Replace" Placement="Placement.Bottom">
                    <MudIconButton Icon="@Icons.Material.Filled.Reply" Variant="Variant.Filled" Color="Color.Warning" Size="Size.Medium" OnClick="RecoverPastData" Class="ml-1" />
                </MudTooltip>
            }

            <MudTooltip Text="Close" Placement="Placement.Bottom">
                <MudIconButton Icon="@Icons.Material.Filled.ArrowForward" Variant="Variant.Filled" Color="Color.Secondary" Size="Size.Medium" OnClick="Close" Class="ml-1" />
            </MudTooltip>
        </MudCardActions>
    </MudCardContent>     
</MudCard>